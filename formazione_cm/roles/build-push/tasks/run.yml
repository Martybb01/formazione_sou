- name: Run docker alpine container
  community.docker.docker_container:
    name: alpine-ssh
    image: '{{ registry_url }}/alpine:{{ alpine_tag }}'
    state: started
    restart_policy: always
    ports:
      - "{{ alpine_port }}:22"
  when: container_runtime == 'docker'

- name: Run docker rocky container
  community.docker.docker_container:
    name: rocky-ssh
    image: '{{ registry_url }}/rocky:{{ rocky_tag }}'
    state: started
    restart_policy: always
    ports:
      - "{{ rocky_port }}:22"
  when: container_runtime == 'docker'


- name: Run podman alpine container
  containers.podman.podman_container:
    name: alpine-ssh
    image: '{{ registry_url }}/alpine:{{ alpine_tag }}'
    state: started
    ports:
      - "{{ alpine_port }}:22"
  when: container_runtime == 'podman'

- name: Run podman rocky container
  containers.podman.podman_container:
    name: rocky-ssh
    image: '{{ registry_url }}/rocky:{{ rocky_tag }}'
    state: started
    ports:
      - "{{ rocky_port }}:22"
  when: container_runtime == 'podman'
